<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>EduLearn Pro</title>
    <link rel="stylesheet" href="style.css">
    <!-- PDF.js CDN - KLUCZOWE dla dzia≈Çania aplikacji -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">üìö EduLearn Pro</h1>
                <div class="user-stats">
                    <div class="stat">
                        <span class="stat-label">Poziom</span>
                        <span class="stat-value" id="userLevel">PoczƒÖtkujƒÖcy</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Punkty</span>
                        <span class="stat-value" id="userPoints">0</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="main-content">
        <div class="container">
            <!-- Upload Section -->
            <section class="upload-section" id="uploadSection">
                <div class="upload-card card">
                    <div class="card__body">
                        <h2>Dodaj materia≈Çy do nauki</h2>
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-icon">üìÑ</div>
                            <p>PrzeciƒÖgnij i upu≈õƒá plik PDF lub kliknij aby wybraƒá</p>
                            <!-- NAPRAWIONE: usuniƒôtno onclick z HTML, JS obs≈Çu≈ºy to -->
                            <input type="file" id="fileInput" accept=".pdf" style="display: none;">
                            <button class="btn btn--secondary" id="selectPdfBtn">
                                Wybierz PDF
                            </button>
                        </div>
                        <div class="divider">lub</div>
                        <div class="url-input-section">
                            <input type="url" id="urlInput" placeholder="Wklej link do materia≈Çu...">
                            <!-- NAPRAWIONE: usuniƒôto onclick, JS obs≈Çu≈ºy to -->
                            <button class="btn btn--primary" id="submitUrlBtn">Dodaj Link</button>
                        </div>
                    </div>
                </div>

                <!-- Recent Documents -->
                <div class="recent-docs card">
                    <div class="card__body">
                        <h3>Ostatnie dokumenty</h3>
                        <div id="recentDocsList" class="recent-docs-list">
                            <p class="no-docs">Nie ma jeszcze przetworzonych dokument√≥w</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Loading Section -->
            <section class="loading-section hidden" id="loadingSection">
                <div class="loading-card card">
                    <div class="card__body">
                        <div class="loading-spinner"></div>
                        <h3 id="loadingText">Przetwarzanie dokumentu PDF...</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <p id="loadingDetails">Ekstraktowanie tekstu...</p>
                    </div>
                </div>
            </section>

            <!-- Activities Section -->
            <section class="activities-section hidden" id="activitiesSection">
                <div class="activities-card card">
                    <div class="card__body">
                        <h2>Wybierz aktywno≈õƒá</h2>
                        <div class="document-info">
                            <p><strong>Dokument:</strong> <span id="currentDocName">-</span></p>
                            <p><strong>Stron:</strong> <span id="currentDocPages">-</span></p>
                        </div>
                        <div class="activity-buttons">
                            <!-- NAPRAWIONE: usuniƒôto onclick z HTML, JS obs≈Çu≈ºy to -->
                            <button class="btn btn--activity" id="mindMapBtn">
                                üß† Mapa My≈õli
                                <small>Wizualizuj kluczowe pojƒôcia</small>
                            </button>
                            <button class="btn btn--activity" id="summaryBtn">
                                üìù Streszczenie
                                <small>Podsumowanie tre≈õci</small>
                            </button>
                            <button class="btn btn--activity" id="quizBtn">
                                üéì Quiz
                                <small>Sprawd≈∫ swojƒÖ wiedzƒô</small>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Mind Map Section -->
            <section class="mindmap-section hidden" id="mindmapSection">
                <div class="mindmap-card card">
                    <div class="card__body">
                        <div class="section-header">
                            <h2>üß† Mapa My≈õli</h2>
                            <!-- NAPRAWIONE: usuniƒôto onclick -->
                            <button class="btn btn--back" id="mindMapBackBtn">‚Üê Powr√≥t</button>
                        </div>
                        <div class="mindmap-container" id="mindmapContainer">
                            <div class="mindmap-controls">
                                <!-- NAPRAWIONE: usuniƒôto onclick -->
                                <button id="zoomInBtn">üîç+</button>
                                <button id="zoomOutBtn">üîç-</button>
                                <button id="resetZoomBtn">‚åÇ</button>
                            </div>
                            <div class="mindmap-canvas" id="mindmapCanvas"></div>
                        </div>
                        <div class="mindmap-actions">
                            <!-- NAPRAWIONE: usuniƒôto onclick -->
                            <button class="btn btn--secondary" id="exportMindMapBtn">üíæ Eksportuj</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="summary-section hidden" id="summarySection">
                <div class="summary-card card">
                    <div class="card__body">
                        <div class="section-header">
                            <h2>üìù Streszczenie</h2>
                            <!-- NAPRAWIONE: usuniƒôto onclick -->
                            <button class="btn btn--back" id="summaryBackBtn">‚Üê Powr√≥t</button>
                        </div>
                        <div class="summary-controls">
                            <label>D≈Çugo≈õƒá streszczenia:</label>
                            <!-- NAPRAWIONE: usuniƒôto onchange -->
                            <select id="summaryLength">
                                <option value="short">Kr√≥tkie</option>
                                <option value="medium" selected>≈örednie</option>
                                <option value="long">Szczeg√≥≈Çowe</option>
                            </select>
                        </div>
                        <div class="summary-content" id="summaryContent">
                            <div class="loading-text">Generowanie streszczenia...</div>
                        </div>
                        <div class="summary-actions">
                            <!-- NAPRAWIONE: usuniƒôto onclick -->
                            <button class="btn btn--secondary" id="exportSummaryBtn">üíæ Eksportuj</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quiz Section -->
            <section class="quiz-section hidden" id="quizSection">
                <div class="quiz-card card">
                    <div class="card__body">
                        <div class="section-header">
                            <h2>üéì Quiz</h2>
                            <!-- NAPRAWIONE: usuniƒôto onclick -->
                            <button class="btn btn--back" id="quizBackBtn">‚Üê Powr√≥t</button>
                        </div>
                        <div class="quiz-progress">
                            <div class="progress-info">
                                <span id="currentQuestion">1</span> z <span id="totalQuestions">10</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="quizProgress"></div>
                            </div>
                        </div>
                        <div class="quiz-content" id="quizContent">
                            <!-- Quiz questions will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quiz Results Section -->
            <section class="quiz-results-section hidden" id="quizResultsSection">
                <div class="results-card card">
                    <div class="card__body">
                        <h2>üèÜ Wyniki Quiz</h2>
                        <div class="results-summary">
                            <div class="score-circle">
                                <div class="score-text">
                                    <span id="finalScore">0</span><span class="percent">%</span>
                                </div>
                            </div>
                            <div class="results-details">
                                <p><strong>Poprawne odpowiedzi:</strong> <span id="correctAnswers">0</span></p>
                                <p><strong>B≈Çƒôdne odpowiedzi:</strong> <span id="wrongAnswers">0</span></p>
                                <p><strong>Przewidywana ocena:</strong> <span id="predictedGrade">-</span></p>
                            </div>
                        </div>
                        
                        <div class="improvement-areas">
                            <h3>Obszary do poprawy</h3>
                            <div id="improvementList">
                                <!-- Improvement areas will be populated by JavaScript -->
                            </div>
                        </div>

                        <div class="results-actions">
                            <!-- NAPRAWIONE: usuniƒôto onclick -->
                            <button class="btn btn--primary" id="retakeQuizBtn">üîÑ Pon√≥w Quiz</button>
                            <button class="btn btn--secondary" id="resultsBackBtn">‚Üê Powr√≥t</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Gamification Elements -->
    <div class="achievement-popup hidden" id="achievementPopup">
        <div class="achievement-content">
            <div class="achievement-icon" id="achievementIcon">üèÜ</div>
            <div class="achievement-text">
                <h3 id="achievementTitle">Nowa Odznaka!</h3>
                <p id="achievementDescription">-</p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>EduLearn Pro - Inteligentna nauka z AI</p>
        </div>
    </footer>

    <!-- JavaScript - WA≈ªNA KOLEJNO≈öƒÜ! -->
    <!-- NAJPIERW PDF.js (ju≈º za≈Çadowany w <head>), POTEM nasza aplikacja -->
    <script>
        // Debug info - sprawdzenie czy PDF.js jest za≈Çadowany
        console.log('=== SPRAWDZANIE ≈öRODOWISKA ===');
        console.log('PDF.js za≈Çadowany:', typeof pdfjsLib !== 'undefined');
        console.log('Document ready state:', document.readyState);
        console.log('User Agent:', navigator.userAgent);
        console.log('=======================');
    </script>
    <script src="app.js"></script>
</body>
</html>